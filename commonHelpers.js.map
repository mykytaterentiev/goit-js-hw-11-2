{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n};\nfunction toggleLoader() {\n  refs.loader.classList.toggle('hidden');\n}\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nfunction getImagesByName(name) {\n  const searchParams = new URLSearchParams({\n    key: '42272856-fbb9ecaa9aa7f62044da3b204',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    q: name,\n  });\n  const BASE_URL = 'https://pixabay.com/api/';\n  const PARAMS = `?${searchParams}`;\n  const url = BASE_URL + PARAMS;\n  return fetch(url).then(res => {\n    if (res.ok) {\n      return res.json();\n    } else {\n      throw new Error(res.status);\n    }\n  });\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n  toggleLoader();\n  const query = event.target.elements.query.value;\n  getImagesByName(query)\n    .then(data => {\n      toggleLoader();\n      if (query === '') {\n        iziToast.warning({\n          message:\n            'Sorry, you forgot to enter a search term. Please try again!',\n          position: 'topRight',\n          messageSize: '16px',\n          timeout: 2000,\n        });\n        return;\n      } else if (parseInt(data.totalHits) > 0) {\n        renderMarkup(data.hits);\n      } else {\n        refs.gallery.innerHTML = '';\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          backgroundColor: 'red',\n          messageColor: 'white',\n          messageSize: '16px',\n          iconColor: 'white',\n          iconUrl: errorIcon,\n          color: 'white',\n          timeout: 2000,\n        });\n      }\n    })\n    .catch(err => {\n      iziToast.error({\n        message: 'Error',\n        position: 'topRight',\n        backgroundColor: 'red',\n        messageColor: 'white',\n        messageSize: '16px',\n        iconColor: 'white',\n        iconUrl: errorIcon,\n        color: 'white',\n        timeout: 2000,\n      });\n    });\n  event.target.reset();\n}\n\nfunction galleryTemplate({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n  <div class=\"gallery-review\">\n  <div class=\"gallery-review-item\"><b>Likes</b> <span>${likes}</span></div>\n  <div class=\"gallery-review-item\"><b>Views</b> <span>${views}</span></div>\n  <div class=\"gallery-review-item\"><b>Comments</b> <span>${comments}</span></div>\n  <div class=\"gallery-review-item\"><b>Downloads</b> <span>${downloads}</span></div>\n  </div></a>\n    `;\n}\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  showCounter: false,\n  captionDelay: 250,\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nfunction renderMarkup(images) {\n  const markup = images.map(galleryTemplate).join('');\n  refs.gallery.innerHTML = markup;\n  gallery.refresh();\n}"],"names":["refs","toggleLoader","onFormSubmit","getImagesByName","name","searchParams","BASE_URL","PARAMS","url","res","event","query","data","iziToast","renderMarkup","err","galleryTemplate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","gallery","SimpleLightbox","images","markup"],"mappings":"6vBAKA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EACA,SAASC,GAAe,CACtBD,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAEAA,EAAK,KAAK,iBAAiB,SAAUE,CAAY,EAEjD,SAASC,EAAgBC,EAAM,CAC7B,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,EAAGD,CACP,CAAG,EACKE,EAAW,2BACXC,EAAS,IAAIF,CAAY,GACzBG,EAAMF,EAAWC,EACvB,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAO,CAC5B,GAAIA,EAAI,GACN,OAAOA,EAAI,OAEX,MAAM,IAAI,MAAMA,EAAI,MAAM,CAEhC,CAAG,CACH,CAEA,SAASP,EAAaQ,EAAO,CAC3BA,EAAM,eAAc,EACpBT,IACA,MAAMU,EAAQD,EAAM,OAAO,SAAS,MAAM,MAC1CP,EAAgBQ,CAAK,EAClB,KAAKC,GAAQ,CAEZ,GADAX,IACIU,IAAU,GAAI,CAChBE,EAAS,QAAQ,CACf,QACE,8DACF,SAAU,WACV,YAAa,OACb,QAAS,GACnB,CAAS,EACD,MACD,MAAU,SAASD,EAAK,SAAS,EAAI,EACpCE,EAAaF,EAAK,IAAI,GAEtBZ,EAAK,QAAQ,UAAY,GACzBa,EAAS,MAAM,CACb,QACE,2EACF,SAAU,WACV,gBAAiB,MACjB,aAAc,QACd,YAAa,OACb,UAAW,QACX,QAAS,UACT,MAAO,QACP,QAAS,GACnB,CAAS,EAET,CAAK,EACA,MAAME,GAAO,CACZF,EAAS,MAAM,CACb,QAAS,QACT,SAAU,WACV,gBAAiB,MACjB,aAAc,QACd,YAAa,OACb,UAAW,QACX,QAAS,UACT,MAAO,QACP,QAAS,GACjB,CAAO,CACP,CAAK,EACHH,EAAM,OAAO,OACf,CAEA,SAASM,EAAgB,CACvB,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO,iCAAiCN,CAAa,qCAAqCC,CAAY,UAAUC,CAAI;AAAA;AAAA,wDAE9DC,CAAK;AAAA,wDACLC,CAAK;AAAA,2DACFC,CAAQ;AAAA,4DACPC,CAAS;AAAA;AAAA,KAGrE,CAEA,IAAIC,EAAU,IAAIC,EAAe,aAAc,CAC7C,YAAa,GACb,aAAc,IACd,SAAU,GACV,aAAc,MACd,gBAAiB,QACnB,CAAC,EAED,SAASX,EAAaY,EAAQ,CAC5B,MAAMC,EAASD,EAAO,IAAIV,CAAe,EAAE,KAAK,EAAE,EAClDhB,EAAK,QAAQ,UAAY2B,EACzBH,EAAQ,QAAO,CACjB"}